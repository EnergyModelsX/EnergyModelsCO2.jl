<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>CO₂ retrofit · EnergyModelsCO2</title><meta name="title" content="CO₂ retrofit · EnergyModelsCO2"/><meta property="og:title" content="CO₂ retrofit · EnergyModelsCO2"/><meta property="twitter:title" content="CO₂ retrofit · EnergyModelsCO2"/><meta name="description" content="Documentation for EnergyModelsCO2."/><meta property="og:description" content="Documentation for EnergyModelsCO2."/><meta property="twitter:description" content="Documentation for EnergyModelsCO2."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">EnergyModelsCO2</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../manual/quick-start/">Quick Start</a></li><li><a class="tocitem" href="../../manual/simple-example/">Examples</a></li><li><a class="tocitem" href="../../manual/NEWS/">Release notes</a></li></ul></li><li><span class="tocitem">Nodes</span><ul><li><a class="tocitem" href="../source/">CO₂ source</a></li><li><a class="tocitem" href="../storage/">CO₂ storage</a></li><li class="is-active"><a class="tocitem" href>CO₂ retrofit</a><ul class="internal"><li><a class="tocitem" href="#nodes-CCS_retrofit-fields"><span>Introduced type and its field</span></a></li><li><a class="tocitem" href="#nodes-CCS_retrofit-math"><span>Mathematical description</span></a></li></ul></li></ul></li><li><span class="tocitem">How to</span><ul><li><a class="tocitem" href="../../how-to/contribute/">Contribute to EnergyModelsCO2</a></li><li><a class="tocitem" href="../../how-to/incorporate_retrofit/">Incorporate CO₂ capture retrofit in other nodes</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../../library/public/">Public</a></li><li><input class="collapse-toggle" id="menuitem-5-2" type="checkbox"/><label class="tocitem" for="menuitem-5-2"><span class="docs-label">Internals</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../library/internals/types/">Types</a></li><li><a class="tocitem" href="../../library/internals/methods-fields/">Methods - Accessing fields</a></li><li><a class="tocitem" href="../../library/internals/methods-EMB/">Methods - <code>EnergyModelsBase</code></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Nodes</a></li><li class="is-active"><a href>CO₂ retrofit</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>CO₂ retrofit</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/EnergyModelsX/EnergyModelsCO2.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/EnergyModelsX/EnergyModelsCO2.jl/blob/main/docs/src/nodes/retrofit.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="nodes-CCS_retrofit"><a class="docs-heading-anchor" href="#nodes-CCS_retrofit">CO₂ capture retrofit</a><a id="nodes-CCS_retrofit-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-CCS_retrofit" title="Permalink"></a></h1><p>A specific CO₂ source node is required as the default implementation of a <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/#EnergyModelsBase.RefSource"><code>RefSource</code></a> does not allow for the CO₂ instance to be an output, as declared in the function <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/constraint-functions/#man-con-flow"><code>constraints_flow_out</code></a>. This is due to the implementation using <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/#EnergyModelsBase.CaptureData"><code>CaptureData</code></a> in which the CO₂ oulet flow is calculated through the implementation of the capture rate.</p><p>Hence, it is necessary to implement a CO₂ source node if one wants to model only a CO₂ source.</p><h2 id="nodes-CCS_retrofit-fields"><a class="docs-heading-anchor" href="#nodes-CCS_retrofit-fields">Introduced type and its field</a><a id="nodes-CCS_retrofit-fields-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-CCS_retrofit-fields" title="Permalink"></a></h2><p>CO₂ capture retrofit requires the implementation of two additional node types, <a href="../../library/public/#EnergyModelsCO2.RefNetworkNodeRetrofit"><code>RefNetworkNodeRetrofit</code></a> and <a href="../../library/public/#EnergyModelsCO2.CCSRetroFit"><code>CCSRetroFit</code></a> both nodes are quite similar to a <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/#EnergyModelsBase.RefNetworkNode"><code>RefNetworkNode</code></a> although their application differs:</p><ul><li><a href="../../library/public/#EnergyModelsCO2.RefNetworkNodeRetrofit"><code>RefNetworkNodeRetrofit</code></a> can be best seen as an existing technology to which CO₂ capture should be fitted.</li><li><a href="../../library/public/#EnergyModelsCO2.CCSRetroFit"><code>CCSRetroFit</code></a> is the CO₂ capture unit.</li></ul><div class="admonition is-danger"><header class="admonition-header">Implementation of retrofit</header><div class="admonition-body"><p>It is necessary to include both <a href="../../library/public/#EnergyModelsCO2.RefNetworkNodeRetrofit"><code>RefNetworkNodeRetrofit</code></a> and <a href="../../library/public/#EnergyModelsCO2.CCSRetroFit"><code>CCSRetroFit</code></a> if one wants to implement the additional installation of CO₂ capture. It is not possible to only use one of them.</p><p>If you want to include several retrofit options, it is of absolute importance that you:</p><ol><li>directly couple the <a href="../../library/public/#EnergyModelsCO2.RefNetworkNodeRetrofit"><code>RefNetworkNodeRetrofit</code></a> and <a href="../../library/public/#EnergyModelsCO2.CCSRetroFit"><code>CCSRetroFit</code></a> nodes through a <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/#EnergyModelsBase.Link"><code>Link</code></a> and</li><li>do <strong>not</strong> include the CO₂ proxy resource (<em><a href="#nodes-CCS_retrofit-fields-new">see below</a></em>) as a product in the <code>Availability</code> node.</li></ol><p>It would be otherwise possible to use a single CO₂ capture unit for all process with the option for retrofit, neglecting potential peak capacity requirements and economies of scale.</p></div></div><h3 id="nodes-CCS_retrofit-fields-stand"><a class="docs-heading-anchor" href="#nodes-CCS_retrofit-fields-stand">Standard fields</a><a id="nodes-CCS_retrofit-fields-stand-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-CCS_retrofit-fields-stand" title="Permalink"></a></h3><p>Both introduced nodes use the same fields, although their meaning may potentially differ. The standard fields are given as:</p><ul><li><strong><code>id</code></strong>:<br/>The field <strong><code>id</code></strong> is only used for providing a name to the node. This is similar to the approach utilized in <code>EnergyModelsBase</code>.</li><li><strong><code>cap::TimeProfile</code></strong>:<br/>The installed capacity corresponds to the potential usage of the node.<br/>If the node should contain investments through the application of <a href="https://energymodelsx.github.io/EnergyModelsInvestments.jl/stable/"><code>EnergyModelsInvestments</code></a>, it is important to note that you can only use <code>FixedProfile</code> or <code>StrategicProfile</code> for the capacity, but not <code>RepresentativeProfile</code> or <code>OperationalProfile</code>. In addition, all values have to be non-negative.<div class="admonition is-info"><header class="admonition-header">Meaning in boths nodes</header><div class="admonition-body"><ul><li><a href="../../library/public/#EnergyModelsCO2.RefNetworkNodeRetrofit"><code>RefNetworkNodeRetrofit</code></a>:<br/>The capacity corresponds to the production capacity of a process.</li><li><a href="../../library/public/#EnergyModelsCO2.CCSRetroFit"><code>CCSRetroFit</code></a>:<br/>The capacity corresponds to the CO₂ flow rate handling capacity, <strong>not</strong> the CO₂ capture capacity</li></ul></div></div></li><li><strong><code>opex_var::TimeProfile</code></strong>:<br/>The variable operational expenses are based on the capacity utilization through the variable <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-cap"><code>:cap_use</code></a>. Hence, it is directly related to the specified <code>output</code> ratios. The variable operating expenses can be provided as <code>OperationalProfile</code> as well.</li><li><strong><code>opex_fixed::TimeProfile</code></strong>:<br/>The fixed operating expenses are relative to the installed capacity (through the field <code>cap</code>) and the chosen duration of a strategic period as outlined on <em><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/how-to/utilize-timestruct/#how_to-utilize_TS">Utilize <code>TimeStruct</code></a></em>.<br/>It is important to note that you can only use <code>FixedProfile</code> or <code>StrategicProfile</code> for the fixed OPEX, but not <code>RepresentativeProfile</code> or <code>OperationalProfile</code>. In addition, all values have to be non-negative.<div class="admonition is-info"><header class="admonition-header">Meaning in boths nodes</header><div class="admonition-body"><ul><li><a href="../../library/public/#EnergyModelsCO2.RefNetworkNodeRetrofit"><code>RefNetworkNodeRetrofit</code></a>:<br/>The variable OPEX is relative to the production of the main product.</li><li><a href="../../library/public/#EnergyModelsCO2.CCSRetroFit"><code>CCSRetroFit</code></a>:<br/>The variable OPEX is relative to the amount of flue gas handled, that is <strong>not</strong> the amount of CO₂ captured.</li></ul></div></div></li><li><strong><code>input::Dict{&lt;:Resource, &lt;:Real}</code></strong> and <strong><code>output::Dict{&lt;:Resource, &lt;:Real}</code></strong>:<br/>Both fields describe the <code>input</code> and <code>output</code> <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/#EnergyModelsBase.Resource"><code>Resource</code></a>s with their corresponding conversion factors as dictionaries.<br/>All values have to be non-negative.<div class="admonition is-info"><header class="admonition-header">Meaning in boths nodes</header><div class="admonition-body"><ul><li><a href="../../library/public/#EnergyModelsCO2.RefNetworkNodeRetrofit"><code>RefNetworkNodeRetrofit</code></a>:<br/>No special meaning. The CO₂ proxy resource is automatically included in the <code>output</code> dictionary through providing additional methods to <code>EMB.outputs</code>.</li><li><a href="../../library/public/#EnergyModelsCO2.CCSRetroFit"><code>CCSRetroFit</code></a>:<br/>The CO₂ proxy resource is automatically included in the <code>input</code> dictionary through providing additional methods to <code>EMB.inputs</code>. Requires the incorporation of the  CO₂ resource in the <code>output</code> dictionary, although the exact value is not relevant. It is furthermore possible to specify additional reenergy required for capturing CO₂ using a conversion factor (<em>e.g.</em>, MWh/t CO₂).</li></ul></div></div></li><li><strong><code>data::Vector{Data}</code></strong>:<br/>An entry for providing additional data to the model. The <code>data</code> vector must include <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/#EnergyModelsBase.CaptureData"><code>CaptureData</code></a> for both <a href="../../library/public/#EnergyModelsCO2.RefNetworkNodeRetrofit"><code>RefNetworkNodeRetrofit</code></a> and <a href="../../library/public/#EnergyModelsCO2.CCSRetroFit"><code>CCSRetroFit</code></a>. It can include additional investment data when <a href="https://energymodelsx.github.io/EnergyModelsInvestments.jl/stable/"><code>EnergyModelsInvestments</code></a> is used.<div class="admonition is-info"><header class="admonition-header">Meaning of the capture rate in both nodes</header><div class="admonition-body"><ul><li><a href="../../library/public/#EnergyModelsCO2.RefNetworkNodeRetrofit"><code>RefNetworkNodeRetrofit</code></a>:<br/>The capture rate corresponds to the fraction of the flue gas which is sent to the <code>CCSRetroFit</code> node. Hence, if the value is below 1, only a fraction of the flue gas can be captured.</li><li><a href="../../library/public/#EnergyModelsCO2.CCSRetroFit"><code>CCSRetroFit</code></a>:<br/>The capture rate corresponds to<ol><li>the fraction captured from the flue gas (<a href="../../library/public/#EnergyModelsCO2.CaptureFlueGas"><code>CaptureFlueGas</code></a>),</li><li>the fraction captured from the flue gas and the energy input to the unit (<a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/#EnergyModelsBase.CaptureEnergyEmissions"><code>CaptureEnergyEmissions</code></a>),</li><li>the fraction captured from the flue gas and the process emissions (<a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/#EnergyModelsBase.CaptureProcessEmissions"><code>CaptureProcessEmissions</code></a>), or</li><li>the fraction captured from the flue gas, the energy input to the unit, and the process emissions (<a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/#EnergyModelsBase.CaptureProcessEnergyEmissions"><code>CaptureProcessEnergyEmissions</code></a>)</li></ol></li></ul></div></div></li></ul><h3 id="nodes-CCS_retrofit-fields-new"><a class="docs-heading-anchor" href="#nodes-CCS_retrofit-fields-new">Additional fields</a><a id="nodes-CCS_retrofit-fields-new-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-CCS_retrofit-fields-new" title="Permalink"></a></h3><p>Both introduced nodes have one additional field:</p><ul><li><strong><code>co2_proxy::Resource</code></strong>:<br/>The CO₂ proxy resource is introduced to simplify the analyses and seperate all streams corresponding to CO₂ from the CO₂ streams considered in CO₂ capture retrofit. It should be specified as <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/#EnergyModelsBase.ResourceCarrier"><code>ResourceCarrier</code></a> with a CO₂ intensity of 0.</li></ul><h2 id="nodes-CCS_retrofit-math"><a class="docs-heading-anchor" href="#nodes-CCS_retrofit-math">Mathematical description</a><a id="nodes-CCS_retrofit-math-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-CCS_retrofit-math" title="Permalink"></a></h2><p>In the following mathematical equations, we use the name for variables and functions used in the model. Variables are in general represented as</p><p><span>$\texttt{var\_example}[index_1, index_2]$</span></p><p>with square brackets, while functions are represented as</p><p><span>$func\_example(index_1, index_2)$</span></p><p>with paranthesis.</p><h3 id="nodes-CCS_retrofit-math-var"><a class="docs-heading-anchor" href="#nodes-CCS_retrofit-math-var">Variables</a><a id="nodes-CCS_retrofit-math-var-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-CCS_retrofit-math-var" title="Permalink"></a></h3><h4 id="nodes-CCS_retrofit-math-var-stand"><a class="docs-heading-anchor" href="#nodes-CCS_retrofit-math-var-stand">Standard variables</a><a id="nodes-CCS_retrofit-math-var-stand-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-CCS_retrofit-math-var-stand" title="Permalink"></a></h4><p>Both introduced nodes utilize all standard variables from the <code>RefNetworkNode</code>, as described on the page <em><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var">Optimization variables</a></em>. The variables include:</p><ul><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-opex"><span>$\texttt{opex\_var}$</span></a></li><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-opex"><span>$\texttt{opex\_fixed}$</span></a></li><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-cap"><span>$\texttt{cap\_use}$</span></a></li><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-cap"><span>$\texttt{cap\_inst}$</span></a></li><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-flow"><span>$\texttt{flow\_in}$</span></a></li><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-flow"><span>$\texttt{flow\_out}$</span></a></li></ul><h4 id="nodes-CCS_retrofit-math-add"><a class="docs-heading-anchor" href="#nodes-CCS_retrofit-math-add">Additional variables</a><a id="nodes-CCS_retrofit-math-add-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-CCS_retrofit-math-add" title="Permalink"></a></h4><p>Both introduced nodes do not add additional variables.</p><h3 id="nodes-CCS_retrofit-math-con"><a class="docs-heading-anchor" href="#nodes-CCS_retrofit-math-con">Constraints</a><a id="nodes-CCS_retrofit-math-con-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-CCS_retrofit-math-con" title="Permalink"></a></h3><p>The following sections omit the direct inclusion of the vector of any node. Instead, it is implicitly assumed that the constraints are valid <span>$\forall n ∈ N$</span> for all <a href="../../library/public/#EnergyModelsCO2.RefNetworkNodeRetrofit"><code>RefNetworkNodeRetrofit</code></a> or <a href="../../library/public/#EnergyModelsCO2.CCSRetroFit"><code>CCSRetroFit</code></a> types if not stated differently. In addition, all constraints are valid <span>$\forall t \in T$</span> (that is in all operational periods) or <span>$\forall t_{inv} \in T^{Inv}$</span> (that is in all strategic periods).</p><h4 id="nodes-CCS_retrofit-math-con-stand"><a class="docs-heading-anchor" href="#nodes-CCS_retrofit-math-con-stand">Standard constraints</a><a id="nodes-CCS_retrofit-math-con-stand-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-CCS_retrofit-math-con-stand" title="Permalink"></a></h4><p>Both introduced nodes utilize in general the standard constraints described on <em><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/constraint-functions/#man-con">Constraint functions</a></em>. These standard constraints are:</p><ul><li><p><code>constraints_capacity</code>:</p><p class="math-container">\[\texttt{cap\_use}[n, t] \leq \texttt{cap\_inst}[n, t]\]</p><div class="admonition is-success"><header class="admonition-header">Using investments</header><div class="admonition-body"><p>The function <code>constraints_capacity_installed</code> is also used in <a href="https://energymodelsx.github.io/EnergyModelsInvestments.jl/stable/"><code>EnergyModelsInvestments</code></a> to incorporate the potential for investment. Nodes with investments are then no longer constrained by the parameter capacity.</p></div></div></li><li><p><code>constraints_capacity_installed</code>:</p><p class="math-container">\[\texttt{cap\_inst}[n, t] = capacity(n, t)\]</p></li><li><p><code>constraints_flow_in</code>:</p><p class="math-container">\[\texttt{flow\_in}[n, t, p] = inputs(n, p) \times \texttt{cap\_use}[n, t]
\qquad \forall p \in inputs(n)\]</p><div class="admonition is-warning"><header class="admonition-header">This standard constraint is only included for `RefNetworkNodeRetrofit`.</header><div class="admonition-body"></div></div></li><li><p><code>constraints_flow_out</code>:</p><p class="math-container">\[\texttt{flow\_out}[n, t, p] =
outputs(n, p) \times \texttt{cap\_use}[n, t]
\qquad \forall p \in outputs(n) \setminus \{\text{CO}_2\}\]</p><div class="admonition is-warning"><header class="admonition-header">This standard constraint is only included for `CCSRetroFit`.</header><div class="admonition-body"></div></div></li><li><p><code>constraints_opex_fixed</code>:</p><p class="math-container">\[\texttt{opex\_fixed}[n, t_{inv}] = opex\_fixed(n, t_{inv}) \times \texttt{cap\_inst}[n, first(t_{inv})]\]</p><div class="admonition is-success"><header class="admonition-header">Why do we use `first()`</header><div class="admonition-body"><p>The variable <span>$\texttt{cap\_inst}$</span> ise declared over all operational periods (see the section on <em><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-cap">Capacity variables</a></em> for further explanations). Hence, we use the function <span>$first(t_{inv})$</span> to retrieve the installed capacity in the first operational period of a given strategic period <span>$t_{inv}$</span> in the function <code>constraints_opex_fixed</code>.</p></div></div></li><li><p><code>constraints_opex_var</code>:</p><p class="math-container">\[\texttt{opex\_var}[n, t_{inv}] = \sum_{t \in t_{inv}} opex_var(n, t) \times \texttt{cap\_use}[n, t] \times EMB.multiple(t_{inv}, t)\]</p></li><li><p><code>constraints_data</code>:<br/>This function is only called for specified data of the nodes, see above. This function is extended with multiple methods for both <code>CCSRetroFit</code> and <code>RefNetworkNodeRetrofit</code>. The individual methods are explained below.</p></li></ul><p>The outlet flow constraint for a <a href="../../library/public/#EnergyModelsCO2.RefNetworkNodeRetrofit"><code>RefNetworkNodeRetrofit</code></a> node is requires introducing new methods for the function <code>constraints_flow_out</code> as the outlet flow of the CO₂ proxy is calculated in the function <code>constraints_data</code> as outlined in <em><a href="#nodes-CCS_retrofit-math-con-stand">Standard constraints</a></em>. This constraint is given by:</p><p class="math-container">\[\texttt{flow\_out}[n, t, p] =
outputs(n, p) \times \texttt{cap\_use}[n, t]
\qquad \forall p \in outputs(n) \setminus \{co2\_proxy(n)\}\]</p><p>The introduction of the CO₂ capture unit as retrofit option requires introducing new methods for the function <code>constraints_data</code> for all <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/#EnergyModelsBase.CaptureData"><code>CaptureData</code></a> as described on <em><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/data-functions/#man-data_fun-emissions">Data functions</a></em>. In all methods, the process emissions of the other <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/#EnergyModelsBase.ResourceEmit"><code>ResourceEmit</code></a>s, that is all emissions resources except for CO₂, are calculated as</p><p class="math-container">\[\begin{aligned}
  \texttt{emissions\_node}&amp;[n, t, p_{em}] = \\ &amp;
    \texttt{cap\_use}[n, t] \times process\_emissions(data, p_{em}, t)
    \qquad \forall p_{em} \in P^{em} \setminus \{\text{CO}_2\}
\end{aligned}\]</p><p><a href="../../library/public/#EnergyModelsCO2.RefNetworkNodeRetrofit"><code>RefNetworkNodeRetrofit</code></a> introduces methods for <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/#EnergyModelsBase.CaptureProcessEmissions"><code>CaptureProcessEmissions</code></a>, <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/#EnergyModelsBase.CaptureEnergyEmissions"><code>CaptureEnergyEmissions</code></a>, and <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/#EnergyModelsBase.CaptureProcessEnergyEmissions"><code>CaptureProcessEnergyEmissions</code></a>.</p><div class="admonition is-info"><header class="admonition-header">data::CaptureProcessEmissions</header><div class="admonition-body"><p>The total produced CO₂ is calculated through an auxiliary expression as</p><p class="math-container">\[  CO2\_tot[n, t] =
    \texttt{cap\_use}[n, t] \times process\_emissions(data, \text{CO}_2, t)\]</p><p>This auxiliary variable is subsequently used to calculate the CO₂ emissions of the node as</p><p class="math-container">\[\begin{aligned}
  \texttt{emissions\_node}&amp;[n, t, \text{CO}_2] = \\ &amp;
    (1-co2\_capture(data)) \times  CO2\_tot[n, t] + \\ &amp;
    \sum_{p_{in} \in P^{in}} co2\_int(p_{in}) \times \texttt{flow\_in}[n, t, p_{in}]
\end{aligned}\]</p></div></div><div class="admonition is-info"><header class="admonition-header">data::CaptureEnergyEmissions</header><div class="admonition-body"><p>The total produced CO₂ is calculated through an auxiliary expression as</p><p class="math-container">\[  CO2\_tot[n, t] =
    \sum_{p_{in} \in P^{in}} co2\_int(p_{in}) \times \texttt{flow\_in}[n, t, p_{in}]\]</p><p>This auxiliary variable is subsequently used to calculate the CO₂ emissions of the node as</p><p class="math-container">\[\begin{aligned}
  \texttt{emissions\_node}&amp;[n, t, \text{CO}_2] = \\ &amp;
    (1-co2\_capture(data)) \times  CO2\_tot[n, t] + \\ &amp;
    \texttt{cap\_use}[n, t] \times process\_emissions(data, \text{CO}_2, t)
\end{aligned}\]</p></div></div><div class="admonition is-info"><header class="admonition-header">data::CaptureProcessEnergyEmissions</header><div class="admonition-body"><p>The total produced CO₂ is calculated through an auxiliary expression as</p><p class="math-container">\[\begin{aligned}
  CO2\_tot&amp;[n, t] = \\ &amp;
    \texttt{cap\_use}[n, t] \times process\_emissions(data, \text{CO}_2, t) + \\ &amp;
    \sum_{p_{in} \in P^{in}} co2\_int(p_{in}) \times \texttt{flow\_in}[n, t, p_{in}]
\end{aligned}\]</p><p>This auxiliary variable is subsequently used to calculate the CO₂ emissions of the node as</p><p class="math-container">\[\begin{aligned}
  \texttt{emissions\_node}&amp;[n, t, \text{CO}_2] = \\ &amp;
    (1-co2\_capture(data)) \times  CO2\_tot[n, t] + \\ &amp;
\end{aligned}\]</p></div></div><p>These constraints are the same as it is the case for other nodes. The only difference is the calculation of the the outlet flow of the CO₂ proxy resource. It is for all <code>CaptureData</code> calculated as</p><p class="math-container">\[  \texttt{flow\_out}[n, t, co2\_proxy(n)] = CO2\_tot[n, t] * co2\_capture(data)\]</p><p><a href="../../library/public/#EnergyModelsCO2.CCSRetroFit"><code>CCSRetroFit</code></a> introduces methods for <a href="../../library/public/#EnergyModelsCO2.CaptureFlueGas"><code>CaptureFlueGas</code></a>, <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/#EnergyModelsBase.CaptureProcessEmissions"><code>CaptureProcessEmissions</code></a>, <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/#EnergyModelsBase.CaptureEnergyEmissions"><code>CaptureEnergyEmissions</code></a>, and <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/#EnergyModelsBase.CaptureProcessEnergyEmissions"><code>CaptureProcessEnergyEmissions</code></a>.</p><p>All types utilize similar functions although there is a variation in the individual calculations. The model introduces two auxiliaty expressiones, <span>$CO2\_tot_[n, t]$</span> and <span>$CO2\_captured[n, t]$</span>. <span>$CO2\_tot_[n, t]$</span> representes the total produced CO₂ (flue gas from the <code>RefNetworkNodeRetrofit</code> and potentially energy usage related emissions and/or process emissions) in the capture unit. Hence, its calculation differes depending on the <code>CaptureData</code>. <span>$CO2\_captured[n, t]$</span> is calculated as:</p><p class="math-container">\[  CO2\_captured[n, t] =
    co2\_capture(data) \times CO2\_tot[n, t]\]</p><p>The CO₂ emissions are calculated for all types using the auxiliary variable <span>$CO2\_captured[n, t]$</span> as</p><p class="math-container">\[\begin{aligned}
  \texttt{emissions\_node}&amp;[n, t, \text{CO}_2] = \\ &amp;
    \texttt{flow\_in}[n, t, co2\_proxy(n)] + \\ &amp;
    \texttt{cap\_use}[n, t] \times process\_emissions(data, \text{CO}_2, t) + \\ &amp;
    \sum_{p_{in} \in P^{in}} co2\_int(p_{in}) \times \texttt{flow\_in}[n, t, p_{in}] - \\ &amp;
    CO2\_captured[n, t]
\end{aligned}\]</p><p>while the CO₂ outlet flow is given as:</p><p class="math-container">\[  \texttt{flow\_out}[n, t, \text{CO}_2] = CO2\_captured[n, t]\]</p><div class="admonition is-info"><header class="admonition-header">data::CaptureFlueGas</header><div class="admonition-body"><p>The total produced CO₂ is calculated as</p><p class="math-container">\[  CO2\_tot[n, t] =
    \texttt{cap\_use}[n, t]\]</p><p>In addition, we have to provide an upper limit on the outlet CO₂ flow to avoid achieving a higher capture rate than specified when the capture unit is dimensioned for a larger CO₂ proxy inlet flow rate:</p><p class="math-container">\[\begin{aligned}
  \texttt{flow\_out}&amp;[n, t, \text{CO}_2] \leq \\ &amp;
    co2\_capture(data) \times \\ &amp;
    \texttt{flow\_in}[n, t, co2\_proxy(n)]
\end{aligned}\]</p></div></div><div class="admonition is-info"><header class="admonition-header">data::CaptureProcessEmissions</header><div class="admonition-body"><p>The total produced CO₂ is calculated as</p><p class="math-container">\[\begin{aligned}
  CO2\_tot&amp;[n, t] = \\ &amp;
    \texttt{cap\_use}[n, t] \times (1 + process\_emissions(data, \text{CO}_2, t))
\end{aligned}\]</p><p>In addition, we have to provide an upper limit on the outlet CO₂ flow to avoid achieving a higher capture rate than specified when the capture unit is dimensioned for a larger CO₂ proxy inlet flow rate:</p><p class="math-container">\[\begin{aligned}
  \texttt{flow\_out}&amp;[n, t, \text{CO}_2] \leq \\ &amp;
    co2\_capture(data) \times \\ &amp;
    (\texttt{flow\_in}[n, t, co2\_proxy(n)] + \\ &amp;
    \texttt{cap\_use}[n, t] \times process\_emissions(data, \text{CO}_2, t))
\end{aligned}\]</p></div></div><div class="admonition is-info"><header class="admonition-header">data::CaptureEnergyEmissions</header><div class="admonition-body"><p>The total produced CO₂ is calculated as</p><p class="math-container">\[\begin{aligned}
  CO2\_tot&amp;[n, t] = \\ &amp;
    \texttt{cap\_use}[n, t] + \\ &amp;
    \sum_{p_{in} \in P^{in}} co2\_int(p_{in}) \times \texttt{flow\_in}[n, t, p_{in}]
\end{aligned}\]</p><p>In addition, we have to provide an upper limit on the outlet CO₂ flow to avoid achieving a higher capture rate than specified when the capture unit is dimensioned for a larger CO₂ proxy inlet flow rate:</p><p class="math-container">\[\begin{aligned}
  \texttt{flow\_out}&amp;[n, t, \text{CO}_2] \leq \\ &amp;
    co2\_capture(data) \times \\ &amp;
    (\texttt{flow\_in}[n, t, co2\_proxy(n)] + \\ &amp;
    \sum_{p_{in} \in P^{in}} co2\_int(p_{in}) \times \texttt{flow\_in}[n, t, p_{in}])
\end{aligned}\]</p></div></div><div class="admonition is-info"><header class="admonition-header">data::CaptureProcessEnergyEmissions</header><div class="admonition-body"><p>The total produced CO₂ is calculated through an auxiliary expression as</p><p class="math-container">\[\begin{aligned}
  CO2\_tot&amp;[n, t] = \\ &amp;
    \texttt{cap\_use}[n, t] \times (1 + process\_emissions(data, \text{CO}_2, t)) + \\ &amp;
    \sum_{p_{in} \in P^{in}} co2\_int(p_{in}) \times \texttt{flow\_in}[n, t, p_{in}]
\end{aligned}\]</p><p>This auxiliary variable is subsequently used to calculate the CO₂ emissions of the node as</p><p class="math-container">\[\begin{aligned}
  \texttt{flow\_out}&amp;[n, t, \text{CO}_2] \leq  \\ &amp;
    co2\_capture(data) \times \\ &amp;
    (\texttt{flow\_in}[n, t, co2\_proxy(n)] + \\ &amp;
    \texttt{cap\_use}[n, t] \times process\_emissions(data, \text{CO}_2, t) + \\ &amp;
    \sum_{p_{in} \in P^{in}} co2\_int(p_{in}) \times \texttt{flow\_in}[n, t, p_{in}])
\end{aligned}\]</p></div></div><h4 id="nodes-CCS_retrofit-math-con-add"><a class="docs-heading-anchor" href="#nodes-CCS_retrofit-math-con-add">Additional constraints</a><a id="nodes-CCS_retrofit-math-con-add-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-CCS_retrofit-math-con-add" title="Permalink"></a></h4><h5 id="nodes-CCS_retrofit-math-con-add-node"><a class="docs-heading-anchor" href="#nodes-CCS_retrofit-math-con-add-node">Constraints calculated in <code>create_node</code></a><a id="nodes-CCS_retrofit-math-con-add-node-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-CCS_retrofit-math-con-add-node" title="Permalink"></a></h5><p>The inlet flow constraint for a <a href="../../library/public/#EnergyModelsCO2.CCSRetroFit"><code>CCSRetroFit</code></a> node is calculated separately as the inlet flow of the CO₂ proxy is calculated in the function <code>constraints_data</code> as outlined in <em><a href="#nodes-CCS_retrofit-math-con-stand">Standard constraints</a></em>. This constraint is given by:</p><p class="math-container">\[\texttt{flow\_in}[n, t, p] =
inputs(n, p) \times \texttt{cap\_use}[n, t]
\qquad \forall p \in inputs(n) \setminus \{co2\_proxy(n)\}\]</p><h5 id="nodes-CCS_retrofit-math-con-add-fun"><a class="docs-heading-anchor" href="#nodes-CCS_retrofit-math-con-add-fun">Constraints through separate functions</a><a id="nodes-CCS_retrofit-math-con-add-fun-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-CCS_retrofit-math-con-add-fun" title="Permalink"></a></h5><p>Neither <a href="../../library/public/#EnergyModelsCO2.RefNetworkNodeRetrofit"><code>RefNetworkNodeRetrofit</code></a> nor <a href="../../library/public/#EnergyModelsCO2.CCSRetroFit"><code>CCSRetroFit</code></a> nodes introduce new functions.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../storage/">« CO₂ storage</a><a class="docs-footer-nextpage" href="../../how-to/contribute/">Contribute to EnergyModelsCO2 »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.6.0 on <span class="colophon-date" title="Tuesday 3 September 2024 11:18">Tuesday 3 September 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
